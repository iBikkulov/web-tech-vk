{% extends 'qa/base.html' %}

{% block content %}
<!-- Main Content -->
<main class="container">
  <!-- Header -->
  <div class="border-bottom border-dark mt-3 mb-2">
    <p class="fs-3 text mb-2">{{ question.title }}</p>
    <p class="fs-6 text">{{ question.text }}</p>
  </div>

  <!-- Answers -->
  {% for answer in question.answer_set.all %}
  <div class="rounded border border-1 mb-2">
    <p class="fs-6 text fw-light overflow-text p-2">{{ answer.text }}</p>
  </div>
  {% endfor %}

  <!-- Answer Form -->
  {% for error in form.non_field_errors %}
    <div class="alert alert-danger">{{ error }}</div>
  {% endfor %}
  <form method="post" action="{% url 'question' question.id %}">
    <p class="fs-5 text mt-3 mb-3">Your Answer</p>
    
    {% csrf_token %}
    
    {% if not user.is_authenticated %}
    <div class="alert alert-danger">Please, authorize to answer.
        <a href="{% url 'login' %}" class="text-decoration-none">Log in</a>
    </div>
    {% endif %}
    
    <div class="rounded-3 border shadow-sm p-3">
      <fieldset>
      {% for field in form %}
        <input class="form-control mb-1" type="{{ field.field.widget.input_type }}"
          name="{{ field.name }}"
        >
      {% endfor %}
      </fieldset>

      <div class="mt-3 text-center">
        <button type="submit" class="btn btn-primary">Answer</button>
      </div>
    </div>
  </form> <!-- End of Answer Form -->
</main> <!-- End of Main Content -->
{% endblock %}
